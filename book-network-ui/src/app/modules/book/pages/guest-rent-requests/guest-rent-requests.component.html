<div class="container py-4">
  <h2 class="mb-4"><i class="fas fa-user-friends me-2"></i>Guest Rent Requests</h2>
  <div *ngIf="loading" class="text-center py-5">
    <i class="fas fa-spinner fa-spin fa-2x text-primary"></i>
    <p>Loading requests...</p>
  </div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div *ngIf="!loading && !error && requests.length === 0" class="alert alert-info">
    No guest rent requests found for your products.
  </div>
  <div *ngIf="requests.length > 0">
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Product Title</th>
            <th>Guest Name</th>
            <th>Phone</th>
            <th>Location</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let req of requests; let i = index" class="align-middle">
            <td class="text-center">{{ i + 1 }}</td>
            <td>
              <div class="fw-medium">{{ req.bookTitle || 'N/A' }}</div>
              <small class="text-muted" *ngIf="req.bookAuthor">{{ req.bookAuthor }}</small>
            </td>
            <td>
              <div *ngIf="req.name || req.lastname">
                {{ req.name || '' }} {{ req.lastname || '' }}
              </div>
              <span *ngIf="!req.name && !req.lastname" class="text-muted">Not provided</span>
            </td>
            <td>
              <a *ngIf="req.phone; else noPhone" [href]="'tel:' + req.phone">
                {{ req.phone }}
              </a>
              <ng-template #noPhone>
                <span class="text-muted">N/A</span>
              </ng-template>
            </td>
            <td>
              <span [title]="req.location || 'No location provided'" class="text-truncate d-inline-block" style="max-width: 200px;">
                {{ req.location || 'N/A' }}
              </span>
            </td>
            <td>
              <span [title]="req.createdDate">
                {{ req.createdDate ? (req.createdDate | date:'medium') : 'N/A' }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>